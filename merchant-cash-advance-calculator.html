---
layout: default
title: "MCA Deal Comparison | Nicolas Lescalier"
---

<div class="container">
  <h1>MCA Deal Comparison</h1>

  <div class="comparison-row">
    <!-- Deal A -->
    <div class="calculator">
      <h2>Deal A</h2>
      <form id="mca-form-1">
        <div class="row">
          <div>
            <label for="advanceAmount1">Advance Amount ($)</label>
            <input type="text" id="advanceAmount1" placeholder="e.g., 10,000.00" required />
          </div>
          <div>
            <label for="factorRate1">Factor Rate (e.g., 1.20)</label>
            <input type="number" id="factorRate1" placeholder="1.20" min="1" step="0.01" required />
          </div>
        </div>
        <div>
          <label for="termLength1">Term Length</label>
          <div class="row">
            <div>
              <input type="number" id="termLength1" placeholder="140" min="1" step="1" required />
            </div>
            <div>
              <select id="termUnit1" required>
                <option value="days">Business Days</option>
                <option value="weeks">Weeks</option>
                <option value="months">Months</option>
              </select>
            </div>
          </div>
        </div>
        <button type="submit" class="btn" id="calculate1" disabled>Calculate</button>
      </form>
      <div class="results" id="results1" style="display: none;">
        <h3>Results A</h3>
        <div class="result-item" id="displayAdvance1"></div>
        <div class="result-item" id="interestPaid1"></div>
        <div class="result-item" id="totalPayback1"></div>
        <div class="result-item" id="periodicPayment1"></div>
        <div class="result-item" id="ratePerMonth1"></div>
      </div>
    </div>

    <!-- Deal B -->
    <div class="calculator">
      <h2>Deal B</h2>
      <form id="mca-form-2">
        <div class="row">
          <div>
            <label for="advanceAmount2">Advance Amount ($)</label>
            <input type="text" id="advanceAmount2" placeholder="e.g., 10,000.00" required />
          </div>
          <div>
            <label for="factorRate2">Factor Rate (e.g., 1.20)</label>
            <input type="number" id="factorRate2" placeholder="1.20" min="1" step="0.01" required />
          </div>
        </div>
        <div>
          <label for="termLength2">Term Length</label>
          <div class="row">
            <div>
              <input type="number" id="termLength2" placeholder="140" min="1" step="1" required />
            </div>
            <div>
              <select id="termUnit2" required>
                <option value="days">Business Days</option>
                <option value="weeks">Weeks</option>
                <option value="months">Months</option>
              </select>
            </div>
          </div>
        </div>
        <button type="submit" class="btn" id="calculate2" disabled>Calculate</button>
      </form>
      <div class="results" id="results2" style="display: none;">
        <h3>Results B</h3>
        <div class="result-item" id="displayAdvance2"></div>
        <div class="result-item" id="interestPaid2"></div>
        <div class="result-item" id="totalPayback2"></div>
        <div class="result-item" id="periodicPayment2"></div>
        <div class="result-item" id="ratePerMonth2"></div>
      </div>
    </div>
  </div>
</div>

<script>
  function formatCurrency(value) {
    return value.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 });
  }
  function parseCurrency(input) {
    const numericString = input.replace(/,/g, '');
    return parseFloat(numericString) || 0;
  }
  function setupCalculator(suffix) {
    const form = document.getElementById(`mca-form-${suffix}`);
    const advanceInput = document.getElementById(`advanceAmount${suffix}`);
    const factorRateInput = document.getElementById(`factorRate${suffix}`);
    const termLengthInput = document.getElementById(`termLength${suffix}`);
    const termUnitInput = document.getElementById(`termUnit${suffix}`);
    const submitButton = document.getElementById(`calculate${suffix}`);
    const resultsDiv = document.getElementById(`results${suffix}`);

    const displayAdvance = document.getElementById(`displayAdvance${suffix}`);
    const interestPaid = document.getElementById(`interestPaid${suffix}`);
    const totalPayback = document.getElementById(`totalPayback${suffix}`);
    const periodicPayment = document.getElementById(`periodicPayment${suffix}`);
    const ratePerMonth = document.getElementById(`ratePerMonth${suffix}`);

    function validateForm() {
      const advanceAmt = parseCurrency(advanceInput.value);
      const factorRate = parseFloat(factorRateInput.value);
      const termLen = parseInt(termLengthInput.value, 10);
      if (advanceAmt > 0 && factorRate >= 1 && termLen >= 1) {
        submitButton.disabled = false;
      } else {
        submitButton.disabled = true;
      }
    }

    // Real-time validation
    advanceInput.addEventListener('input', validateForm);
    factorRateInput.addEventListener('input', validateForm);
    termLengthInput.addEventListener('input', validateForm);
    termUnitInput.addEventListener('change', validateForm);

    advanceInput.addEventListener('blur', function() {
      const rawValue = parseCurrency(this.value);
      if (!isNaN(rawValue)) {
        this.value = formatCurrency(rawValue);
      }
    });
    advanceInput.addEventListener('focus', function() {
      const rawValue = parseCurrency(this.value);
      if (!isNaN(rawValue)) {
        this.value = rawValue > 0 ? rawValue.toFixed(2) : '';
      }
    });

    form.addEventListener('submit', function(event) {
      event.preventDefault();
      const advanceAmt = parseCurrency(advanceInput.value);
      const factorRate = parseFloat(factorRateInput.value);
      const termLen = parseInt(termLengthInput.value, 10);
      const termUnit = termUnitInput.value;

      // Calculate total payback & interest
      const totPay = advanceAmt * factorRate;
      const intPaid = totPay - advanceAmt;

      // Convert term length to months using 20 business days = 1 month
      let termInMonths;
      if (termUnit === 'months') {
        termInMonths = termLen;
      } else if (termUnit === 'weeks') {
        termInMonths = termLen / 4.345;  // approx. weeks per month
      } else {
        termInMonths = termLen / 20;     // 20 business days per month
      }

      // Rate per month (%) & interest $/month
      const rpm = termInMonths > 0 ? ((factorRate - 1) / termInMonths) * 100 : 0;
      const interestPerMonth = termInMonths > 0 ? intPaid / termInMonths : 0;
      const freqLabel = {
        days: 'per Business Day',
        weeks: 'per Week',
        months: 'per Month'
      }[termUnit];
      const payPerPeriod = totPay / termLen;

      displayAdvance.textContent = `Advance Amount: $${formatCurrency(advanceAmt)}`;
      interestPaid.textContent = `Interest Paid Over Time: $${formatCurrency(intPaid)}`;
      totalPayback.textContent = `Total Payback Amount: $${formatCurrency(totPay)}`;
      periodicPayment.textContent = `Periodic Payment (${freqLabel}): $${formatCurrency(payPerPeriod)}`;
      ratePerMonth.textContent = `Rate per Month: ${rpm.toFixed(2)}% ($${formatCurrency(interestPerMonth)}/month)`;

      resultsDiv.style.display = 'block';
    });

    // Initialize validation on load
    validateForm();
  }

  // Initialize both calculators
  setupCalculator('1');
  setupCalculator('2');
</script>
